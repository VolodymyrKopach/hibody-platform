# Action Buttons Implementation - –ì–∞—Ä—è—á—ñ –ö–Ω–æ–ø–∫–∏ –¥–ª—è Hibody Platform

## –û–≥–ª—è–¥ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

–°–∏—Å—Ç–µ–º–∞ –≥–∞—Ä—è—á–∏—Ö –∫–Ω–æ–ø–æ–∫ (action buttons) –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ª–µ–≥–∫–æ –æ–±–∏—Ä–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ –¥—ñ—ó –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–ª–∞–Ω—É —É—Ä–æ–∫—É –≤—ñ–¥ AI. –ó–∞–º—ñ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –¥—ñ–π.

## –Ø–∫ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞

### 1. Backend - –§–æ—Ä–º—É–≤–∞–Ω–Ω—è Actions
Handlers –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –º–∞—Å–∏–≤ `actions` —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:

```typescript
interface ChatHandlerResult {
  success: boolean;
  message: string;
  conversationHistory?: ConversationHistory;
  actions?: Array<{
    action: string;       // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –¥—ñ—ó
    label: string;        // –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
    description: string;  // –û–ø–∏—Å –¥—ñ—ó –¥–ª—è –æ–±—Ä–æ–±–∫–∏
  }>;
  error?: string;
}
```

### 2. API Route - –ü–µ—Ä–µ–¥–∞—á–∞ Actions
`src/app/api/chat/route.ts` –ø–æ–≤–µ—Ä—Ç–∞—î actions –∑ handler result:

```typescript
const result = await chatService.processMessage(message, conversationHistory);
return NextResponse.json(result); // –í–∫–ª—é—á–∞—î actions
```

### 3. Frontend - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ –æ–±—Ä–æ–±–∫–∞

#### ChatMessage Component
`src/components/chat/ChatMessage.tsx` –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î action buttons:

```tsx
{message.sender === 'ai' && message.availableActions && message.availableActions.length > 0 && (
  <Box sx={{ mt: 3, mb: 1 }}>
    <Typography variant="subtitle2" sx={{ mb: 2, color: theme.palette.text.secondary }}>
      üöÄ –î–æ—Å—Ç—É–ø–Ω—ñ –¥—ñ—ó:
    </Typography>
    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1.5 }}>
      {message.availableActions.map((action, index) => (
        <Button
          key={index}
          variant={action.action === 'approve_plan' ? 'contained' : 'outlined'}
          size="small"
          onClick={() => onActionClick?.(action.action, action.description)}
          sx={{ /* —Å—Ç–∏–ª—ñ –∫–Ω–æ–ø–∫–∏ */ }}
          title={action.description}
        >
          {action.label}
        </Button>
      ))}
    </Box>
  </Box>
)}
```

#### useChatLogic Hook
`src/hooks/useChatLogic.ts` –æ–±—Ä–æ–±–ª—è—î –∫–ª—ñ–∫–∏ –Ω–∞ action buttons:

```typescript
const handleActionClick = useCallback(async (action: string, description: string) => {
  // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –¥—ñ—é —è–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  const actionMessage: Message = {
    id: messages.length + 1,
    text: description,
    sender: 'user',
    timestamp: new Date(),
    status: 'sent',
    feedback: null
  };

  setMessages(prev => [...prev, actionMessage]);
  
  // –í–∏–∫–ª–∏–∫–∞—î–º–æ API –∑ description —è–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
  const response = await sendMessageToAPI(description, conversationHistory);
  
  // –û–±—Ä–æ–±–ª—è—î–º–æ AI –≤—ñ–¥–ø–æ–≤—ñ–¥—å
  const aiMessage: Message = {
    id: messages.length + 2,
    text: response.message,
    sender: 'ai',
    timestamp: new Date(),
    status: 'sent',
    feedback: null,
    availableActions: response.actions || []
  };

  setMessages(prev => [...prev, aiMessage]);
}, [messages, conversationHistory]);
```

## Actions –≤—ñ–¥ —Ä—ñ–∑–Ω–∏—Ö Handlers

### EnhancedCreateLessonHandler
–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞–Ω—É —É—Ä–æ–∫—É:

```typescript
actions: [
  {
    action: 'approve_plan',
    label: '‚úÖ –ü–æ—á–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —Å–ª–∞–π–¥—ñ–≤',
    description: '–°—Ö–≤–∞–ª–∏—Ç–∏ –ø–ª–∞–Ω —ñ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª–∞–π–¥—ñ–≤'
  },
  {
    action: 'edit_plan',
    label: '‚úèÔ∏è –ó–º—ñ–Ω–∏—Ç–∏ –ø–ª–∞–Ω',
    description: '–í–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏ –¥–æ –ø–ª–∞–Ω—É —É—Ä–æ–∫—É'
  },
  {
    action: 'regenerate_plan',
    label: 'üîÑ –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–ª–∞–Ω',
    description: '–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –ø–ª–∞–Ω—É'
  }
]
```

### EditPlanHandler
–ü—ñ—Å–ª—è –∑–∞–ø–∏—Ç—É —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–ª–∞–Ω—É:

```typescript
actions: [
  {
    action: 'create_new_lesson',
    label: '‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π —É—Ä–æ–∫',
    description: '–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–ª–∞–Ω —É—Ä–æ–∫—É'
  }
]
```

### ChatService - handleApprovePlan
–ü—ñ—Å–ª—è —Å—Ö–≤–∞–ª–µ–Ω–Ω—è –ø–ª–∞–Ω—É:

```typescript
actions: [
  {
    action: 'generate_next_slide',
    label: '‚ñ∂Ô∏è –ù–∞—Å—Ç—É–ø–Ω–∏–π —Å–ª–∞–π–¥',
    description: `–ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Å–ª–∞–π–¥ 2/${totalSlides}`
  },
  {
    action: 'regenerate_slide',
    label: 'üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏',
    description: '–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç —Ü—å–æ–≥–æ —Å–ª–∞–π–¥—É'
  }
]
```

## –ü–æ—Ç—ñ–∫ –≤–∑–∞—î–º–æ–¥—ñ—ó

1. **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á**: "—Å—Ç–≤–æ—Ä–∏ —É—Ä–æ–∫ –ø—Ä–æ –¥–∏–Ω–æ–∑–∞–≤—Ä—ñ–≤ –¥–ª—è –¥—ñ—Ç–µ–π 6 —Ä–æ–∫—ñ–≤"
2. **AI**: –ì–µ–Ω–µ—Ä—É—î –ø–ª–∞–Ω + –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î 3 –∫–Ω–æ–ø–∫–∏:
   - ‚úÖ –ü–æ—á–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —Å–ª–∞–π–¥—ñ–≤
   - ‚úèÔ∏è –ó–º—ñ–Ω–∏—Ç–∏ –ø–ª–∞–Ω  
   - üîÑ –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–ª–∞–Ω

3. **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î** "‚úÖ –ü–æ—á–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —Å–ª–∞–π–¥—ñ–≤"
4. **–°–∏—Å—Ç–µ–º–∞**: 
   - –î–æ–¥–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞: "–°—Ö–≤–∞–ª–∏—Ç–∏ –ø–ª–∞–Ω —ñ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª–∞–π–¥—ñ–≤"
   - –ì–µ–Ω–µ—Ä—É—î –ø–µ—Ä—à–∏–π —Å–ª–∞–π–¥
   - –ü–æ–∫–∞–∑—É—î –Ω–æ–≤—ñ –∫–Ω–æ–ø–∫–∏: "‚ñ∂Ô∏è –ù–∞—Å—Ç—É–ø–Ω–∏–π —Å–ª–∞–π–¥", "üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏"

## –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –∫–Ω–æ–ø–æ–∫

### –û—Å–Ω–æ–≤–Ω—ñ –∫–Ω–æ–ø–∫–∏ (approve_plan)
- `variant="contained"` - –∑–∞–ø–æ–≤–Ω–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞
- `fontWeight: 600` - –∂–∏—Ä–Ω–∏–π —à—Ä–∏—Ñ—Ç
- `boxShadow: 2` - —Ç—ñ–Ω—å –¥–ª—è –≤–∏–¥—ñ–ª–µ–Ω–Ω—è

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –∫–Ω–æ–ø–∫–∏
- `variant="outlined"` - –æ–±–≤–µ–¥–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞
- `fontWeight: 500` - –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π —à—Ä–∏—Ñ—Ç
- –•–æ–≤–µ—Ä –µ—Ñ–µ–∫—Ç –∑ —Ç—ñ–Ω–Ω—é

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å
- `flexWrap: 'wrap'` - –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—å—Å—è –Ω–∞ –Ω–æ–≤—ñ —Ä—è–¥–∫–∏
- `gap: 1.5` - –≤—ñ–¥—Å—Ç—É–ø–∏ –º—ñ–∂ –∫–Ω–æ–ø–∫–∞–º–∏
- `fontSize: '0.875rem'` - –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —Ç–µ–∫—Å—Ç—É

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Å–∏—Å—Ç–µ–º–∏

1. **UX –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è**: –ú–µ–Ω—à–µ –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É, —à–≤–∏–¥—à–∏–π –≤–∏–±—ñ—Ä –¥—ñ–π
2. **–ó—Ä–æ–∑—É–º—ñ–ª—ñ—Å—Ç—å**: –ß—ñ—Ç–∫—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ —â–æ —Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ
3. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å**: –û–¥–Ω–∞–∫–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å—ñ—Ö –¥—ñ–π
4. **–ì–Ω—É—á–∫—ñ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –¥—ñ—ó –¥–æ handlers
5. **–í—ñ–∑—É–∞–ª—å–Ω–∞ —ñ—î—Ä–∞—Ä—Ö—ñ—è**: –ì–æ–ª–æ–≤–Ω—ñ –¥—ñ—ó –≤–∏–¥—ñ–ª–µ–Ω—ñ –∫–æ–ª—å–æ—Ä–æ–º

## –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏

–î–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –¥—ñ–π:

1. **–£ Handler**: –¥–æ–¥–∞—Ç–∏ action –¥–æ –º–∞—Å–∏–≤—É `actions`
2. **–£ ChatService**: –¥–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –≤ `handleAction()` –º–µ—Ç–æ–¥ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
3. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

## –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–≤–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

```typescript
// –í Handler
return {
  success: true,
  message: "–ü–ª–∞–Ω —É—Ä–æ–∫—É –≥–æ—Ç–æ–≤–∏–π!",
  actions: [
    {
      action: 'approve_plan',
      label: '‚úÖ –ü–æ—á–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é',
      description: '–°—Ö–≤–∞–ª–∏—Ç–∏ –ø–ª–∞–Ω —ñ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª–∞–π–¥—ñ–≤'
    }
  ]
};

// –í Component
<Button
  onClick={() => onActionClick('approve_plan', '–°—Ö–≤–∞–ª–∏—Ç–∏ –ø–ª–∞–Ω —ñ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª–∞–π–¥—ñ–≤')}
>
  ‚úÖ –ü–æ—á–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é
</Button>

// –í Hook
const handleActionClick = async (action, description) => {
  // –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —è–∫ –∑–≤–∏—á–∞–π–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  await sendMessageToAPI(description, conversationHistory);
};
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Ç–µ–ø–µ—Ä –º–æ–∂—É—Ç—å:
- ‚úÖ –®–≤–∏–¥–∫–æ –æ–±–∏—Ä–∞—Ç–∏ –¥—ñ—ó –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–ª–∞–Ω—É
- üéØ –ë–∞—á–∏—Ç–∏ —á—ñ—Ç–∫—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ –ø—Ä–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏
- üöÄ –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–µ –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –∑ AI –±–µ–∑ –∑–∞–π–≤–æ–≥–æ –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
- üì± –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–º —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –Ω–∞ –≤—Å—ñ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö 