# üé® –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è FLUX.1 [schnell] –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å

## –ü—Ä–æ FLUX.1 [schnell]

**FLUX.1 [schnell]** - —Ü–µ –Ω–∞–π–Ω–æ–≤—ñ—à–∞ –º–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤—ñ–¥ Black Forest Labs, –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ —Ç–∞ —è–∫–æ—Å—Ç—ñ. –í–æ–Ω–∞ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ—Å–≤—ñ—Ç–Ω—ñ—Ö —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ–π –¥–ª—è –¥—ñ—Ç–µ–π.

### –ü–µ—Ä–µ–≤–∞–≥–∏ FLUX.1 [schnell]:
- ‚ö° **–®–≤–∏–¥–∫—ñ—Å—Ç—å**: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–∞ 2-4 —Å–µ–∫—É–Ω–¥–∏
- üéØ **–Ø–∫—ñ—Å—Ç—å**: –í–∏—Å–æ–∫–æ–¥–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- üé® **–°—Ç–∏–ª—ñ**: –ú—É–ª—å—Ç—è—à–Ω–∏–π, —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π, —ñ–ª—é—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏–π
- üë∂ **–ë–µ–∑–ø–µ–∫–∞**: –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –¥—ñ—Ç–µ–π
- üí∞ **–¶—ñ–Ω–∞**: –ï–∫–æ–Ω–æ–º—ñ—á–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API

### 1. –û—Ç—Ä–∏–º–∞–Ω–Ω—è API –∫–ª—é—á–∞ Together AI

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [together.ai](https://together.ai)
2. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å –∞–±–æ —É–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ —Ä–æ–∑–¥—ñ–ª API Keys
4. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –∫–ª—é—á –¥–ª—è FLUX.1

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env.local` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:

```bash
# Claude API (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–Ω—Ç—É)
ANTHROPIC_API_KEY=your_claude_api_key_here

# Together AI API (–¥–ª—è FLUX.1 schnell)
TOGETHER_API_KEY=your_together_api_key_here

# Environment
NODE_ENV=development
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

–ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç —Ç–∞ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `/images`:

```bash
npm run dev
```

–í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:3000/images

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë–∞–∑–æ–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è

```typescript
import { generateImage } from '@/utils/imageGeneration';

const result = await generateImage({
  prompt: 'Educational children illustration about mathematics',
  width: 1024,
  height: 768
});

if (result.success) {
  console.log('Generated:', result.image); // base64 string
}
```

### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–ª—è —Å–ª–∞–π–¥—ñ–≤

```typescript
const response = await fetch('/api/images/slide', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    topic: '–î–æ–¥–∞–≤–∞–Ω–Ω—è —á–∏—Å–µ–ª –¥–æ 10',
    ageGroup: '6-12',
    style: 'cartoon',
    imageType: 'illustration'
  })
});
```

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —á–∞—Ç–æ–º

```typescript
const chatResponse = await fetch('/api/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    message: '–°—Ç–≤–æ—Ä–∏ —É—Ä–æ–∫ –ø—Ä–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫—É',
    generateImages: true,
    imagePrompts: ['–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω—ñ —á–∏—Å–ª–∞', '–î–æ–¥–∞–≤–∞–Ω–Ω—è']
  })
});
```

## API Endpoints

### `/api/images` - –ë–∞–∑–æ–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è
- **POST**: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞ –ø—Ä–æ–º–ø—Ç–æ–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `prompt`, `width`, `height`, `aspectRatio`

### `/api/images/slide` - –î–ª—è —Å–ª–∞–π–¥—ñ–≤
- **POST**: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ—Å–≤—ñ—Ç–Ω—å–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è —Å–ª–∞–π–¥—É
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `topic`, `ageGroup`, `style`, `imageType`

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### `ImageGenerator`
–ü–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å:

```tsx
import ImageGenerator from '@/components/ImageGenerator';

<ImageGenerator 
  onImageGenerated={(imageData, prompt) => {
    // –û–±—Ä–æ–±–∫–∞ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
  }}
  initialTopic="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞"
  initialAgeGroup="6-12"
  mode="embedded"
/>
```

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –æ—Å–≤—ñ—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î –ø—Ä–æ–º–ø—Ç–∏, –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –¥–ª—è –¥—ñ—Ç–µ–π:

```typescript
import { createEducationalImagePrompt } from '@/utils/imageGeneration';

const prompt = createEducationalImagePrompt(
  '–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞', // —Ç–µ–º–∞
  '6-12',       // –≤—ñ–∫
  'cartoon'     // —Å—Ç–∏–ª—å
);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "High-quality cartoon style educational illustration for children (age 6-12) about –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞. Bright colors, friendly characters..."
```

### –†–æ–∑–º—ñ—Ä–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å
–û–ø—Ç–∏–º–∞–ª—å–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ü—ñ–ª–µ–π:

- **–°–ª–∞–π–¥–∏**: 1024x768 (4:3)
- **–ú—ñ–Ω—ñ–∞—Ç—é—Ä–∏**: 512x512 (1:1)
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: 1200x630 (—à–∏—Ä–æ–∫–∏–π)
- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**: 800x600

### –ë–µ–∑–ø–µ–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç—É
–í—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ñ—ñ–ª—å—Ç—Ä—É—é—Ç—å—Å—è:
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –¥—ñ—Ç–µ–π
- ‚úÖ –ü–æ–∑–∏—Ç–∏–≤–Ω–∞ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞
- ‚úÖ –û—Å–≤—ñ—Ç–Ω—è —Ü—ñ–Ω–Ω—ñ—Å—Ç—å
- ‚ùå –ù–∞—Å–∏–ª—å—Å—Ç–≤–æ
- ‚ùå –°—Ç—Ä–∞—à–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç

## –¶—ñ–Ω–∏

### Together AI (FLUX.1 schnell)
- **–¶—ñ–Ω–∞**: ~$0.003 –∑–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- **–®–≤–∏–¥–∫—ñ—Å—Ç—å**: 2-4 —Å–µ–∫—É–Ω–¥–∏
- **–Ø–∫—ñ—Å—Ç—å**: –í–∏—Å–æ–∫–∞
- **–õ—ñ–º—ñ—Ç–∏**: 1000 –∑–æ–±—Ä–∞–∂–µ–Ω—å/–¥–µ–Ω—å (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–ª–∞–Ω)

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏
| –ú–æ–¥–µ–ª—å | –¶—ñ–Ω–∞ | –®–≤–∏–¥–∫—ñ—Å—Ç—å | –Ø–∫—ñ—Å—Ç—å |
|--------|------|-----------|--------|
| FLUX.1 schnell | $0.003 | 2-4—Å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| DALL-E 3 | $0.04 | 10-30—Å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Midjourney | $0.025 | 30-60—Å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Stable Diffusion | Free | 5-15—Å | ‚≠ê‚≠ê‚≠ê‚≠ê |

## Troubleshooting

### –ü–æ–º–∏–ª–∫–∞ "API key not configured"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–∞–π–ª `.env.local`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ `TOGETHER_API_KEY` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —Ä–æ–∑—Ä–æ–±–∫–∏

### –ü–æ–º–∏–ª–∫–∞ "Failed to generate image"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –±–∞–ª–∞–Ω—Å Together AI
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–æ–º–ø—Ç –Ω–∞ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- –°–ø—Ä–æ–±—É–π—Ç–µ –º–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

### –ü–æ–≤—ñ–ª—å–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è
- FLUX.1 schnell –º–∞—î –±—É—Ç–∏ —à–≤–∏–¥–∫–∏–º (2-4—Å)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è
- –ó–º–µ–Ω—à—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

## –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Å—Ç–∏–ª—ñ–≤
–†–µ–¥–∞–≥—É–π—Ç–µ `/utils/imageGeneration.ts`:

```typescript
const styleModifiers = {
  cartoon: 'Bright colors, friendly characters...',
  realistic: 'Photorealistic but appropriate...',
  illustration: 'Digital art style...',
  watercolor: 'Soft watercolor painting style...', // –Ω–æ–≤–∏–π —Å—Ç–∏–ª—å
};
```

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤
```typescript
const sizes = {
  slide: { width: 1024, height: 768 },
  story: { width: 800, height: 1000 }, // –Ω–æ–≤–∏–π —Ä–æ–∑–º—ñ—Ä
};
```

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ CMS
–ú–æ–∂–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑ –±—É–¥—å-—è–∫–æ—é CMS –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å:

```typescript
// –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö
const savedImage = await saveImageToDB({
  base64: result.image,
  prompt: result.prompt,
  metadata: result.metadata
});
```

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å Together AI API
4. –ó–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—å –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Together AI

## –ü—Ä–∏–º—ñ—Ç–∫–∏

- FLUX.1 –ø—ñ–¥—Ç—Ä–∏–º—É—î –ª–∏—à–µ –∞–Ω–≥–ª—ñ–π—Å—å–∫—ñ –ø—Ä–æ–º–ø—Ç–∏
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—î —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ —Ç–µ–º–∏ –≤ –∞–Ω–≥–ª—ñ–π—Å—å–∫—ñ –ø—Ä–æ–º–ø—Ç–∏
- –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω—å: –¥–æ 1024x1024 –¥–ª—è –∫—Ä–∞—â–æ—ó —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- –ú–æ–¥–µ–ª—å –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –¥–ª—è 1-4 –∫—Ä–æ–∫—ñ–≤ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó 