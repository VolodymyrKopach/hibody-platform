# Тест-кейси адмін дашборду

---

## ТЕСТ #1: Реєстрація користувача

**Мета:** Перевірити що Total Users та Active Users збільшуються

**Кроки:**
1. Запиши Total Users: _____
2. Відкрий `/auth/register`
3. Email: `test.user1@example.com`, Пароль: `Test123456!`
4. Клікни "Зареєструватися"
5. Перейди `/admin` → Refresh

**Очікуваний результат:**
- Total Users +1
- Active Users (30d) +1

---

## ТЕСТ #2: Створення уроку

**Мета:** Перевірити що Lessons збільшується

**Кроки:**
1. Запиши Total Lessons: _____
2. Залогінься як `test.user1@example.com`
3. Перейди `/create-lesson`
4. Тема: `Математика`, Назва: `Додавання`, Вікова група: `6-7`
5. Створи урок
6. Перейди `/admin` → Refresh

**Очікуваний результат:**
- Lessons +1
- Content Created +1

---

## ТЕСТ #3: Генерація слайдів

**Мета:** Перевірити що Total Slides збільшується

**Кроки:**
1. Запиши Total Slides: _____
2. В редакторі уроку створи 2 слайди (через AI або вручну)
3. Збережи
4. Перейди `/admin` → Refresh → Content Stats

**Очікуваний результат:**
- Total Slides +2
- Slides This Week +2

---

## ТЕСТ #4: Створення worksheet

**Мета:** Перевірити що Worksheets збільшується

**Кроки:**
1. Запиши Total Worksheets: _____
2. В уроці або `/worksheet-editor` створи worksheet
3. Тип: `Math`, Назва: `Додавання - Завдання`, Вікова група: `6-7`
4. Збережи
5. Перейди `/admin` → Refresh

**Очікуваний результат:**
- Worksheets +1
- Worksheets created this week +1

---

## ТЕСТ #5: Другий користувач

**Мета:** Перевірити підрахунок кількох активних користувачів

**Кроки:**
1. Запиши Active Users (7d): _____
2. Вийди або відкрий інкогніто
3. Зареєструй `test.user2@example.com`
4. Створи 1 урок та 1 слайд
5. Перейди `/admin` → Refresh

**Очікуваний результат:**
- Total Users +1 (всього +2)
- Active Users (7d) показує мінімум 2
- Lessons +1
- Slides +1

---

## ТЕСТ #6: Тестова підписка

**Мета:** Перевірити що MRR та Active Subscriptions збільшуються

**Кроки:**
1. Запиши MRR: $_____, Active Subscriptions: _____
2. Залогінься як `test.user1@example.com`
3. Перейди `/payment`
4. Обери Professional ($9)
5. Картка: `4242424242424242`, Дата: `12/25`, CVV: `123`
6. Оплати
7. Перейди `/admin/finance` → Refresh

**Очікуваний результат:**
- Active Subscriptions +1
- MRR +$9
- Paid Users +1

---

## ТЕСТ #7: Графіки

**Мета:** Перевірити що графіки відображаються без помилок

**Кроки:**
1. Перейди `/admin` → Refresh
2. Прокрути до "Analytics Overview"
3. Подивись на 4 графіки

**Очікуваний результат:**
- User Growth Chart відображається
- Lesson Creation Chart відображається
- AI Usage Chart відображається
- Revenue Chart відображається
- Остання точка (сьогодні) має дані

---

## ТЕСТ #8: Список користувачів

**Мета:** Перевірити що користувачі є в списку з правильними даними

**Кроки:**
1. Перейди `/admin/users`
2. Знайди `test.user1@example.com`
3. Перевір: Email, Lessons Count, Subscription Status

**Очікуваний результат:**
- Email: `test.user1@example.com`
- Lessons Count = 1
- Subscription Status = `professional` (якщо купив)

---

## ТЕСТ #9: Список уроків

**Мета:** Перевірити що уроки відображаються з правильними даними

**Кроки:**
1. Перейди `/admin/lessons`
2. Знайди урок "Додавання"
3. Перевір: Subject, Age Group, User Email, Slides Count

**Очікуваний результат:**
- Subject: `Математика`
- Age Group: `6-7`
- User Email: `test.user1@example.com`
- Slides Count = 2

---

## ТЕСТ #10: Activity Log

**Мета:** Перевірити що дії логуються

**Кроки:**
1. Перейди `/admin/activity`
2. Подивись останні записи

**Очікуваний результат:**
- Є запис `register` для test.user1
- Є запис `lesson_created`
- Є запис `slide_generated` (якщо AI)
- User Email правильний

---

## ТЕСТ #11: Finance Dashboard

**Мета:** Перевірити фінансові метрики

**Кроки:**
1. Перейди `/admin/finance`
2. Перевір Revenue Metrics, Subscription Status

**Очікуваний результат:**
- MRR правильний (підписки × $9)
- ARR = MRR × 12
- Revenue by Plan показує Professional
- Active правильна кількість

---

## ТЕСТ #12: Невдала реєстрація

**Мета:** Перевірити що помилки не впливають на метрики

**Кроки:**
1. Запиши Total Users: _____
2. Перейди `/auth/register`
3. Email: `неправильний-email` (без @)
4. Спробуй зареєструватись
5. Перейди `/admin` → Refresh

**Очікуваний результат:**
- Показано помилку
- Total Users НЕ змінився

---

## ТЕСТ #13: Видалення уроку

**Мета:** Перевірити що Lessons зменшується

**Кроки:**
1. Запиши Lessons: _____, Slides: _____
2. Перейди `/admin/lessons`
3. Знайди тестовий урок, запиши кількість слайдів: _____
4. Клікни Delete → підтверди
5. Перейди `/admin` → Refresh

**Очікуваний результат:**
- Lessons -1
- Slides зменшився на кількість слайдів уроку
- Activity log має `lesson_deleted`

---

## ТЕСТ #14: Скасування підписки

**Мета:** Перевірити що MRR падає

**Кроки:**
1. Запиши MRR: $_____
2. Перейди `/admin/users` → знайди користувача з підпискою
3. Скасуй підписку (через профіль або admin)
4. Перейди `/admin/finance` → Refresh

**Очікуваний результат:**
- Active Subscriptions -1
- MRR -$9
- Churn Rate збільшився
- Activity log має `subscription_cancelled`

---

## ТЕСТ #15: Доступ не-адміна (БЕЗПЕКА)

**Мета:** Перевірити що не-адміни не бачать дашборд

**Кроки:**
1. Вийди з адмін акаунту
2. Залогінься як `test.user1@example.com` (звичайний користувач)
3. Спробуй відкрити `/admin`
4. Спробуй API: `fetch('/api/admin/users')`

**Очікуваний результат:**
- Редірект на `/` або 403 error
- API повертає `{ error: "Unauthorized" }`
- Дані НЕ видно

---

## ТЕСТ #16: Невдалий платіж

**Мета:** Перевірити що невдалі платежі не впливають на MRR

**Кроки:**
1. Запиши MRR: $_____
2. Залогінься як користувач без підписки
3. Перейди `/payment` → Professional
4. Картка: `4000000000000002` (тестова для помилки)
5. Спробуй оплатити
6. Перейди `/admin/finance` → Refresh

**Очікуваний результат:**
- Показано помилку платежу
- MRR НЕ змінився
- Користувач залишився Free

---

## ТЕСТ #17: Фільтри

**Мета:** Перевірити роботу фільтрів

**Кроки:**
1. Перейди `/admin/users`
2. Пошук: введи `test.user1`
3. Очисти → фільтр Subscription: `Professional`
4. Очисти → фільтр Role: `Admin`

**Очікуваний результат:**
- Пошук знаходить правильно
- Фільтр Subscription працює
- Фільтр Role працює
- Можна очистити

---

## ТЕСТ #18: Пагінація

**Мета:** Перевірити роботу з багатьма записами

**Умова:** 25+ користувачів

**Кроки:**
1. Перейди `/admin/users`
2. Внизу мають бути кнопки пагінації
3. Клікни "2" або "Next"
4. Перевір URL

**Очікуваний результат:**
- Показано 20 записів
- Кнопки пагінації видимі
- Перехід працює
- URL оновлюється

---

## ТЕСТ #19: Різні плани підписок

**Мета:** Перевірити MRR для різних планів

**Кроки:**
1. Запиши MRR: $_____
2. Користувач 1 → Professional ($9)
3. Користувач 2 → Premium ($19) якщо є
4. Перейди `/admin/finance` → Refresh

**Очікуваний результат:**
- MRR = $9 + $19 = $28
- Revenue by Plan показує обидва
- Breakdown правильний

---

## ТЕСТ #20: DAU/WAU/MAU

**Мета:** Перевірити engagement метрики

**Кроки:**
1. Перейди `/admin/analytics`
2. Подивись Engagement Metrics
3. Перевір співвідношення: DAU ≤ WAU ≤ MAU

**Очікуваний результат:**
- DAU показує активних сьогодні
- WAU ≥ DAU
- MAU ≥ WAU
- Графіки трендів відображаються

---

## ФІНАЛЬНА ТАБЛИЦЯ РЕЗУЛЬТАТІВ

```
МЕТРИКА               │ ДО      │ ПІСЛЯ   │ РІЗНИЦЯ │ ✅/❌
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Total Users           │ _______ │ _______ │ +______ │ ____
Active Users (30d)    │ _______ │ _______ │ +______ │ ____
Active Users (7d)     │ _______ │ _______ │ +______ │ ____
Total Lessons         │ _______ │ _______ │ +______ │ ____
Total Worksheets      │ _______ │ _______ │ +______ │ ____
Total Slides          │ _______ │ _______ │ +______ │ ____
AI Requests           │ _______ │ _______ │ +______ │ ____
Active Subscriptions  │ _______ │ _______ │ +______ │ ____
MRR                   │ $______ │ $______ │ +$_____ │ ____
```

**Знайдені проблеми:**
1. _________________________________________________
2. _________________________________________________

**Висновок:** ✅ Працює / ❌ Є проблеми


