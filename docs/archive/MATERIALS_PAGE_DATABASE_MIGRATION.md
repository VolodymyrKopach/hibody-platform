# –ú—ñ–≥—Ä–∞—Ü—ñ—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ "–ú–æ—ó –º–∞—Ç–µ—Ä—ñ–∞–ª–∏" –Ω–∞ –±–∞–∑—É –¥–∞–Ω–∏—Ö

## –ü—Ä–æ–±–ª–µ–º–∞
–°—Ç–æ—Ä—ñ–Ω–∫–∞ "–ú–æ—ó –º–∞—Ç–µ—Ä—ñ–∞–ª–∏" –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∞ localStorage –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤, —Ö–æ—á–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤ –≤–∂–µ –±—É–ª–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–∏—Ö Supabase.

## –†—ñ—à–µ–Ω–Ω—è
–ü–æ–≤–Ω—ñ—Å—Ç—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API —Ç–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∑–∞–º—ñ—Å—Ç—å localStorage.

## –ó–º—ñ–Ω–∏

### 1. –°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π —Ö—É–∫ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ API
**–§–∞–π–ª:** `src/hooks/useSupabaseLessons.ts`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è —É—Ä–æ–∫—ñ–≤ –∑ API (`/api/lessons`)
- –í–∏–¥–∞–ª–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤ —á–µ—Ä–µ–∑ API
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤ —á–µ—Ä–µ–∑ API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∑–º—ñ–Ω
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ —Å—Ç–∞–Ω—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

**–û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏:**
```typescript
const { 
  lessons: dbLessons, 
  loading: isLoading, 
  error: dbError, 
  refreshLessons,
  deleteLesson: deleteLessonFromDb,
  updateLesson: updateLessonInDb
} = useSupabaseLessons();
```

### 2. –ü–µ—Ä–µ–ø–∏—Å–∞–Ω–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É "–ú–æ—ó –º–∞—Ç–µ—Ä—ñ–∞–ª–∏"
**–§–∞–π–ª:** `src/app/materials/page.tsx`

**–í–∏–¥–∞–ª–µ–Ω–æ:**
- ‚ùå –Ü–º–ø–æ—Ä—Ç–∏ `LessonStorage`, `SavedLesson`, `FolderStorage`
- ‚ùå –í—Å—è –ª–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏ –∑ localStorage
- ‚ùå –§—É–Ω–∫—Ü—ñ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑ localStorage
- ‚ùå –°–∫–ª–∞–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–∞–ø–æ–∫ (—Ç–∏–º—á–∞—Å–æ–≤–æ)
- ‚ùå –§—É–Ω–∫—Ü—ñ—ó –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–ª–∞–π–¥—ñ–≤ (—Ç–∏–º—á–∞—Å–æ–≤–æ)

**–î–æ–¥–∞–Ω–æ:**
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `useSupabaseLessons` —Ö—É–∫
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ API
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- ‚úÖ –°—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º
- ‚úÖ –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è `DatabaseLesson` –≤ `Material`

### 3. –û–Ω–æ–≤–ª–µ–Ω–æ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö
**–ó–º—ñ–Ω–∏ –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö:**

**–ë—É–ª–æ (localStorage):**
```typescript
interface SavedLesson {
  id: string;
  title: string;
  description: string;
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
}
```

**–°—Ç–∞–ª–æ (Database):**
```typescript
interface DatabaseLesson {
  id: string;
  title: string;
  description: string | null;
  subject: string;
  age_group: string;  // –∑–∞–º—ñ—Å—Ç—å ageGroup
  created_at: string; // –∑–∞–º—ñ—Å—Ç—å createdAt
  updated_at: string; // –∑–∞–º—ñ—Å—Ç—å updatedAt
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è –∑ snake_case
}
```

### 4. –§—É–Ω–∫—Ü—ñ—ó –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
**–§—É–Ω–∫—Ü—ñ—è:** `convertDatabaseLessonsToMaterials`

–ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î –¥–∞–Ω—ñ –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —É —Ñ–æ—Ä–º–∞—Ç –¥–ª—è UI:
- `age_group` ‚Üí `ageGroup` + –æ—á–∏—â–µ–Ω–Ω—è –≤—ñ–¥ "—Ä–æ–∫—ñ–≤"
- `created_at` ‚Üí `createdAt` + —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–∞—Ç–∏
- `thumbnail_url` ‚Üí `thumbnail` + fallback
- `null` –∑–Ω–∞—á–µ–Ω–Ω—è ‚Üí –ø–æ—Ä–æ–∂–Ω—ñ —Ä—è–¥–∫–∏

### 5. –û–Ω–æ–≤–ª–µ–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—ó —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
**–í–∏–¥–∞–ª–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤:**
```typescript
// –ë—É–ª–æ
const deleteSuccess = LessonStorage.deleteLesson(lessonId);

// –°—Ç–∞–ª–æ
const deleteSuccess = await deleteLessonFromDb(lessonId);
```

**–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —É—Ä–æ–∫—ñ–≤:**
```typescript
// –ë—É–ª–æ
const success = LessonStorage.updateLesson(editingLesson.id, updates);

// –°—Ç–∞–ª–æ
const success = await updateLessonInDb(editingLesson.id, {
  title: editFormData.title.trim(),
  description: editFormData.description.trim(),
  subject: editFormData.subject.trim(),
  age_group: editFormData.ageGroup.trim()
});
```

### 6. –°–ø—Ä–æ—â–µ–Ω–æ UI
**–í–∏–¥–∞–ª–µ–Ω–æ —Ç–∏–º—á–∞—Å–æ–≤–æ:**
- –°–∏—Å—Ç–µ–º–∞ –ø–∞–ø–æ–∫ (–±—É–¥–µ –¥–æ–¥–∞–Ω–∞ –ø—ñ–∑–Ω—ñ—à–µ –∑ –ë–î)
- –ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ª–∞–π–¥—ñ–≤ (–ø–æ—Ç—Ä–µ–±—É—î API –¥–ª—è —Å–ª–∞–π–¥—ñ–≤)
- Drag & Drop (–±—É–¥–µ –¥–æ–¥–∞–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ)

**–ó–∞–ª–∏—à–µ–Ω–æ:**
- –ü–µ—Ä–µ–≥–ª—è–¥ —É—Ä–æ–∫—ñ–≤
- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö —É—Ä–æ–∫—ñ–≤
- –í–∏–¥–∞–ª–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
- –ü–æ—à—É–∫

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –©–æ –ø—Ä–∞—Ü—é—î:
1. **–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤** - —É—Ä–æ–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
2. **–í–∏–¥–∞–ª–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤** - –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ API
3. **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —É—Ä–æ–∫—ñ–≤** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ API
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** - –ø—ñ—Å–ª—è –∑–º—ñ–Ω –¥–∞–Ω—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è
5. **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** - –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
6. **–°—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### üîÑ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:
- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ —á–∞—Ç—ñ** ‚Üí **–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ –º–∞—Ç–µ—Ä—ñ–∞–ª–∞—Ö** ‚úÖ
- –£—Ä–æ–∫–∏, —Å—Ç–≤–æ—Ä–µ–Ω—ñ —á–µ—Ä–µ–∑ –¥—ñ–∞–ª–æ–≥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è, —Ç–µ–ø–µ—Ä –∑'—è–≤–ª—è—é—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ "–ú–æ—ó –º–∞—Ç–µ—Ä—ñ–∞–ª–∏"

### üìä –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
- –°—Ç–æ—Ä—ñ–Ω–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- API –∑–∞–ø–∏—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ
- –î–∞–Ω—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–î–æ–¥–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É –ø–∞–ø–æ–∫** - —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
2. **–í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫—É —Å–ª–∞–π–¥—ñ–≤** - —á–µ—Ä–µ–∑ API —Å–ª–∞–π–¥—ñ–≤
3. **–î–æ–¥–∞—Ç–∏ Drag & Drop** - –¥–ª—è –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤
4. **–û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - –∫–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ pagination

## –í–∞–∂–ª–∏–≤–æ

‚ö†Ô∏è **localStorage –±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É—Ä–æ–∫—ñ–≤**
- –í—Å—ñ —É—Ä–æ–∫–∏ —Ç–µ–ø–µ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- –ó–º—ñ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é—Ç—å—Å—è –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏
- –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –Ω–∞–¥—ñ–π–Ω–æ –≤ Supabase 