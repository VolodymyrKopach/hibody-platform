# Test Plan: Slide Panel and Intent Fixes

## –ü—Ä–æ–±–ª–µ–º–∏, —è–∫—ñ –±—É–ª–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ:

### 1. **–î—Ä—É–≥–∏–π —Å–ª–∞–π–¥ –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ –ø–∞–Ω–µ–ª—ñ —Å–ª–∞–π–¥—ñ–≤**
**–ü—Ä–∏—á–∏–Ω–∞:** `ChatMessage.tsx` –º–∞–≤ —É–º–æ–≤—É —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ø–µ—Ä—à–æ–≥–æ —Å–ª–∞–π–¥—É:
```typescript
// ‚ùå –ë—É–ª–æ
if (message.text.includes('‚úÖ **–ü–µ—Ä—à–∏–π —Å–ª–∞–π–¥ –≥–æ—Ç–æ–≤–∏–π!**'))

// ‚úÖ –°—Ç–∞–ª–æ  
const isSlideReady = message.text.includes('–≥–æ—Ç–æ–≤–∏–π!**') || 
                    message.text.includes('‚úÖ **–ü–µ—Ä—à–∏–π —Å–ª–∞–π–¥ –≥–æ—Ç–æ–≤–∏–π!**') ||
                    message.text.includes('‚úÖ **–°–ª–∞–π–¥') && message.text.includes('–≥–æ—Ç–æ–≤–∏–π!**');
```

### 2. **–†—ñ–∑–Ω—ñ –Ω–∞–º—ñ—Ä–∏ –¥–ª—è –ø–µ—Ä—à–æ–≥–æ —Ç–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Å–ª–∞–π–¥—ñ–≤**
**–ü—Ä–∏—á–∏–Ω–∞:** –î–≤–∞ —Ä—ñ–∑–Ω—ñ –Ω–∞–º—ñ—Ä–∏ `CREATE_SLIDE` —ñ `CREATE_NEW_SLIDE` –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –ø–æ-—Ä—ñ–∑–Ω–æ–º—É

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤ `ChatService.ts`
- –û–Ω–æ–≤–ª–µ–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏ –≤ `ClaudeIntentDetectionService.ts`
- –î–æ–¥–∞–Ω–æ `DataCollectionHandler` –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏

## –¢–µ—Å—Ç–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —É—Ä–æ–∫—É —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞–Ω–µ–ª—ñ —Å–ª–∞–π–¥—ñ–≤
1. –í—ñ–¥–∫—Ä–∏—Ç–∏ `/chat`
2. –ù–∞–ø–∏—Å–∞—Ç–∏: "–°—Ç–≤–æ—Ä–∏ —É—Ä–æ–∫ –ø—Ä–æ –∫–æ—Å–º–æ—Å –¥–ª—è –¥—ñ—Ç–µ–π 7 —Ä–æ–∫—ñ–≤"
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "‚úÖ –ü–æ—á–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —Å–ª–∞–π–¥—ñ–≤"
4. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
   - –ü–µ—Ä—à–∏–π —Å–ª–∞–π–¥ –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ –ø—Ä–∞–≤—ñ–π –ø–∞–Ω–µ–ª—ñ
   - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "‚ñ∂Ô∏è –ù–∞—Å—Ç—É–ø–Ω–∏–π —Å–ª–∞–π–¥"

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥—Ä—É–≥–æ–≥–æ —Å–ª–∞–π–¥—É
1. –ü—Ä–æ–¥–æ–≤–∂—É—é—á–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Å—Ü–µ–Ω–∞—Ä—ñ–π
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "‚ñ∂Ô∏è –ù–∞—Å—Ç—É–ø–Ω–∏–π —Å–ª–∞–π–¥"
3. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –î—Ä—É–≥–∏–π —Å–ª–∞–π–¥ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è
   - –ó'—è–≤–ª—è—î—Ç—å—Å—è –≤ –ø–∞–Ω–µ–ª—ñ —Å–ª–∞–π–¥—ñ–≤ –ø–æ—Ä—É—á –∑ –ø–µ—Ä—à–∏–º
   - –õ—ñ—á–∏–ª—å–Ω–∏–∫ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ "2/6" –∞–±–æ –ø–æ–¥—ñ–±–Ω–µ

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞–º—ñ—Ä—ñ–≤
1. –ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —É—Ä–æ–∫—É –Ω–∞–ø–∏—Å–∞—Ç–∏: "–¥–æ–¥–∞–π —Å–ª–∞–π–¥ –ø—Ä–æ –ø–ª–∞–Ω–µ—Ç–∏"
2. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –°–∏—Å—Ç–µ–º–∞ —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –Ω–∞–º—ñ—Ä `CREATE_NEW_SLIDE`
   - –°—Ç–≤–æ—Ä–∏—Ç—å –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π —Å–ª–∞–π–¥
   - –°–ª–∞–π–¥ –∑'—è–≤–∏—Ç—å—Å—è –≤ –ø–∞–Ω–µ–ª—ñ

### –°—Ü–µ–Ω–∞—Ä—ñ–π 4: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –Ω–∞–º—ñ—Ä—ñ–≤ –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
1. –í –Ω–æ–≤—ñ–π —Å–µ—Å—ñ—ó –Ω–∞–ø–∏—Å–∞—Ç–∏: "—Å—Ç–≤–æ—Ä–∏ —Å–ª–∞–π–¥ –ø—Ä–æ –ú–∞—Ä—Å"
2. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å —Å–ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä–∏—Ç–∏ —É—Ä–æ–∫
   - –ó–∞–ø—Ä–æ–ø–æ–Ω—É—î —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–≤–Ω–∏–π —É—Ä–æ–∫

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:

### –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `src/components/chat/ChatMessage.tsx` - —Ä–æ–∑—à–∏—Ä–µ–Ω–∞ —É–º–æ–≤–∞ –¥–ª—è –≤—Å—ñ—Ö —Å–ª–∞–π–¥—ñ–≤
- `src/services/chat/ChatService.ts` - —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –Ω–∞–º—ñ—Ä—ñ–≤
- `src/services/intent/ClaudeIntentDetectionService.ts` - –æ–Ω–æ–≤–ª–µ–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏
- `src/app/api/intent-detection/route.ts` - —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏

### –õ–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–µ–±–∞–≥—É:
```typescript
console.log('üîç ChatMessage useEffect triggered:', {
  hasSlideReadyText: message.text.includes('–≥–æ—Ç–æ–≤–∏–π!**'),
  hasLessonObject: !!(message as any).lesson,
  lessonSlidesCount: (message as any).lesson?.slides?.length
});
```

## –û—á—ñ–∫—É–≤–∞–Ω—ñ –ø–æ–ª—ñ–ø—à–µ–Ω–Ω—è:

1. ‚úÖ –î—Ä—É–≥–∏–π —Ç–∞ –Ω–∞—Å—Ç—É–ø–Ω—ñ —Å–ª–∞–π–¥–∏ —Ç–µ–ø–µ—Ä –∑'—è–≤–ª—è—é—Ç—å—Å—è –≤ –ø–∞–Ω–µ–ª—ñ
2. ‚úÖ –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –Ω–∞–º—ñ—Ä–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª–∞–π–¥—ñ–≤  
3. ‚úÖ –ö—Ä–∞—â—ñ –ª–æ–≥–∏ –¥–ª—è –¥–µ–±–∞–≥—É
4. ‚úÖ –ö–æ—Ä–µ–∫—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —É—Ä–æ–∫—É

## –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ `npm run dev`
2. –í—ñ–¥–∫—Ä–∏—Ç–∏ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ `http://localhost:3000/chat`
3. –í–∏–∫–æ–Ω–∞—Ç–∏ –≤—Å—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞
5. –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –ø–∞–Ω–µ–ª—å —Å–ª–∞–π–¥—ñ–≤ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è:

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∞–π–¥–∏ –≤—Å–µ —â–µ –Ω–µ –∑'—è–≤–ª—è—é—Ç—å—Å—è
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ, —á–∏ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î `onLessonCreate`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞–º—ñ—Ä —Ä–æ–∑–ø—ñ–∑–Ω–∞—î—Ç—å—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ  
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–æ–º–ø—Ç–∏ –≤ Claude API —Ç–∞ –ª–æ–≥–∏ –Ω–∞–º—ñ—Ä—ñ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–º–∏–ª–∫–∏ –≤ –æ–±—Ä–æ–±—Ü—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `conversationHistory` –≤ –∑–∞–ø–∏—Ç–∞—Ö 