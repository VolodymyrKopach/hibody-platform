# üë§ Account Page - Features Overview

–°—Ç–æ—Ä—ñ–Ω–∫–∞ Account —Ç–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—ñ–¥–ø–∏—Å–∫—É —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏.

## üìë –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏

–°—Ç–æ—Ä—ñ–Ω–∫–∞ –º–∞—î **4 –æ—Å–Ω–æ–≤–Ω—ñ —Ç–∞–±—ñ**:

### 1. üë§ –ü—Ä–æ—Ñ—ñ–ª—å (Profile)
- –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
- –ê–≤–∞—Ç–∞—Ä

### 2. üëë –ü—ñ–¥–ø–∏—Å–∫–∞ (Subscription) - **–ù–û–í–ê**
–ü–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—ñ–¥–ø–∏—Å–∫—É —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π:

#### –°—Ç–∞—Ç—É—Å –ø—ñ–¥–ø–∏—Å–∫–∏
- **Free –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:**
  - –ü–æ–∫–∞–∑—É—î "–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω"
  - –û–±–º–µ–∂–µ–Ω–Ω—è: 3 –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
  - –ö–Ω–æ–ø–∫–∞ "Upgrade to Pro"

- **Pro –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:**
  - –ü–æ–∫–∞–∑—É—î "TeachSpark Pro üéâ"
  - –î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏
  - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤ –¥–æ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è
  - Badge "–ù–µ–æ–±–º–µ–∂–µ–Ω—ñ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó"

#### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π
- **–õ—ñ—á–∏–ª—å–Ω–∏–∫**: –ø–æ–∫–∞–∑—É—î —Å–∫—ñ–ª—å–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ
- **Progress bar** (–¥–ª—è Free): –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –ª—ñ–º—ñ—Ç—É
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
  - –í—Å—å–æ–≥–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ —É—Ä–æ–∫—ñ–≤
  - –°—Ç–∞—Ç—É—Å (–ú–æ–∂–Ω–∞ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ / –õ—ñ–º—ñ—Ç –≤–∏—á–µ—Ä–ø–∞–Ω–æ)

#### –ü–µ—Ä–µ–≤–∞–≥–∏ Pro –ø—ñ–¥–ø–∏—Å–∫–∏
–î–ª—è Free –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø–æ–∫–∞–∑—É—î:
- ‚úÖ –ù–µ–æ–±–º–µ–∂–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —É—Ä–æ–∫—ñ–≤
- ‚úÖ –ü–æ–≤–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ–π
- ‚úÖ –ö–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—è —à–∞–±–ª–æ–Ω—ñ–≤
- ‚úÖ –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- –¶—ñ–Ω–∞: **$9/–º—ñ—Å**
- CTA: "–û—Ñ–æ—Ä–º–∏—Ç–∏ Pro –ø—ñ–¥–ø–∏—Å–∫—É"

#### –Ü—Å—Ç–æ—Ä—ñ—è –ø–ª–∞—Ç–µ–∂—ñ–≤
–¢–∞–±–ª–∏—Ü—è –∑ —ñ—Å—Ç–æ—Ä—ñ—î—é –ø–ª–∞—Ç–µ–∂—ñ–≤ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è Pro):
- –î–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂—É
- –ù–æ–º–µ—Ä –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –°—É–º–∞
- –°—Ç–∞—Ç—É—Å (completed/pending/failed)

### 3. üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (Stats)
–†–æ–∑—à–∏—Ä–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

**–û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏:**
- üìö –í—Å—å–æ–≥–æ —É—Ä–æ–∫—ñ–≤
- üé® –í—Å—å–æ–≥–æ —Å–ª–∞–π–¥—ñ–≤
- ‚ö° **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—ó (NEW)** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π
- üìÖ –£—Ä–æ–∫—ñ–≤ —Ü—å–æ–≥–æ –º—ñ—Å—è—Ü—è

**–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:**
- –û—Å—Ç–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (—Å–ª–∞–π–¥—ñ–≤ –Ω–∞ —É—Ä–æ–∫)

**–ê–Ω–∞–ª—ñ–∑:**
- –°–µ—Ä–µ–¥–Ω—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª–∞–π–¥—ñ–≤
- –¢–∏–ø –ø—ñ–¥–ø–∏—Å–∫–∏ (badge)

**–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∞–∫–∞—É–Ω—Ç:**
- –î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- –û—Å—Ç–∞–Ω–Ω—ñ–π –≤—Ö—ñ–¥

### 4. üîí –ë–µ–∑–ø–µ–∫–∞ (Security)
- –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—é
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏

---

## üé® –î–∏–∑–∞–π–Ω Features

### –í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏

**Free –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:**
- ‚ö™ –°—ñ—Ä–∏–π –∫–æ–ª—ñ—Ä —Ç–µ–º–∏
- ‚ö†Ô∏è Warning alerts –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ –ª—ñ–º—ñ—Ç—É
- Progress bar —á–µ—Ä–≤–æ–Ω—ñ—î –ø—Ä–∏ –Ω–∞–±–ª–∏–∂–µ–Ω–Ω—ñ –¥–æ –ª—ñ–º—ñ—Ç—É

**Pro –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:**
- üëë –ó–æ–ª–æ—Ç–∞ –∫–æ—Ä–æ–Ω–∞
- üåü –ì—Ä–∞–¥—ñ—î–Ω—Ç –∑ –∑–æ–ª–æ—Ç–∏—Å—Ç–∏–º –≤—ñ–¥—Ç—ñ–Ω–∫–æ–º
- ‚úÖ Success badges
- –ù–µ–º–∞—î –æ–±–º–µ–∂–µ–Ω—å

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å
- üì± **Mobile**: 1 –∫–æ–ª–æ–Ω–∫–∞
- üíª **Tablet**: 2 –∫–æ–ª–æ–Ω–∫–∏
- üñ•Ô∏è **Desktop**: 4 –∫–æ–ª–æ–Ω–∫–∏ (–¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)

---

## üîå API Endpoints

### GET `/api/user/subscription`
–ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –ø—ñ–¥–ø–∏—Å–∫–∏:

```typescript
{
  success: true,
  data: {
    subscription_type: 'free' | 'pro',
    subscription_expires_at: '2024-11-12T...' | null,
    generation_count: 3,
    last_generation_at: '2024-10-12T...' | null,
    payments: [
      {
        id: 'uuid',
        order_reference: 'TS-...',
        amount: 9,
        currency: 'USD',
        status: 'completed',
        created_at: '2024-10-12T...'
      }
    ]
  }
}
```

### GET `/api/user/stats`
–†–æ–∑—à–∏—Ä–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ–Ω–æ–≤–ª–µ–Ω–∏–π):

```typescript
{
  success: true,
  stats: {
    totalLessons: 5,
    totalSlides: 42,
    lastActivity: '2024-10-12T...',
    monthlyLessons: 3,
    joinedAt: '2024-09-01T...',
    subscriptionType: 'free' | 'pro',
    generationCount: 3,        // NEW
    subscriptionExpiresAt: '2024-11-12T...' | null, // NEW
    lastSignIn: '2024-10-12T...'
  }
}
```

---

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### –ù–æ–≤—ñ —Ñ–∞–π–ª–∏:

**1. `SubscriptionSection.tsx`**
–ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç tab "–ü—ñ–¥–ø–∏—Å–∫–∞"

**Features:**
- Subscription status card
- Generation usage with progress
- Pro features list
- Payment history table
- CTA buttons

**2. `src/app/api/user/subscription/route.ts`**
API endpoint –¥–ª—è –¥–∞–Ω–∏—Ö –ø—ñ–¥–ø–∏—Å–∫–∏

---

## üéØ User Flow

### Free –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á

1. **–ó–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É Account**
   - –ë–∞—á–∏—Ç—å —Å–≤—ñ–π —Å—Ç–∞—Ç—É—Å "Free"
   - –ë–∞—á–∏—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: "2 / 3"

2. **–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ tab "–ü—ñ–¥–ø–∏—Å–∫–∞"**
   - –ë–∞—á–∏—Ç—å –æ–±–º–µ–∂–µ–Ω–Ω—è
   - –ë–∞—á–∏—Ç—å –ø–µ—Ä–µ–≤–∞–≥–∏ Pro
   - –ë–∞—á–∏—Ç—å —Ü—ñ–Ω—É $9/–º—ñ—Å

3. **–ù–∞—Ç–∏—Å–∫–∞—î "Upgrade to Pro"**
   - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/payment`
   - –û—Ñ–æ—Ä–º–ª—é—î –ø—ñ–¥–ø–∏—Å–∫—É

4. **–ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –æ–ø–ª–∞—Ç–∏**
   - –ë–∞—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å "Pro üéâ"
   - –ë–∞—á–∏—Ç—å –¥–∞—Ç—É –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è
   - –ë–∞—á–∏—Ç—å —ñ—Å—Ç–æ—Ä—ñ—é –ø–ª–∞—Ç–µ–∂—ñ–≤

### Pro –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á

1. **–ó–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É Account**
   - –ë–∞—á–∏—Ç—å –∫–æ—Ä–æ–Ω—É üëë
   - –ë–∞—á–∏—Ç—å "TeachSpark Pro"

2. **–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ tab "–ü—ñ–¥–ø–∏—Å–∫–∞"**
   - –ë–∞—á–∏—Ç—å –¥–Ω—ñ –¥–æ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è
   - –ë–∞—á–∏—Ç—å "–ù–µ–æ–±–º–µ–∂–µ–Ω—ñ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó"
   - –ë–∞—á–∏—Ç—å —ñ—Å—Ç–æ—Ä—ñ—é –ø–ª–∞—Ç–µ–∂—ñ–≤

3. **–ú–æ–∂–µ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏:**
   - –°–∫—ñ–ª—å–∫–∏ —É—Ä–æ–∫—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–æ
   - –ö–æ–ª–∏ –∑–∞–∫—ñ–Ω—á–∏—Ç—å—Å—è –ø—ñ–¥–ø–∏—Å–∫–∞
   - –Ü—Å—Ç–æ—Ä—ñ—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π

---

## üîî Alerts & Notifications

### Warning states:

**–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è –ª—ñ–º—ñ—Ç—É:**
```
‚ö†Ô∏è –õ—ñ–º—ñ—Ç –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π –≤–∏—á–µ—Ä–ø–∞–Ω–æ.
–û—Ñ–æ—Ä–º—ñ—Ç—å Pro –ø—ñ–¥–ø–∏—Å–∫—É –¥–ª—è –Ω–µ–æ–±–º–µ–∂–µ–Ω–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π!
[–û—Ñ–æ—Ä–º–∏—Ç–∏ Pro ‚Üí]
```

**–ó–∞–∫—ñ–Ω—á–µ–Ω–Ω—è Pro:**
```
‚ö†Ô∏è –í–∞—à–∞ –ø—ñ–¥–ø–∏—Å–∫–∞ –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ 3 –¥–Ω—ñ.
[–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É ‚Üí]
```

---

## üí° Tips –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –∫–æ—Ä–∏—Å–Ω—ñ –ø—ñ–¥–∫–∞–∑–∫–∏:

**Free –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º:**
- "üí° Pro –ø—ñ–¥–ø–∏—Å–∫–∞ –¥–∞—î –Ω–µ–æ–±–º–µ–∂–µ–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ!"
- "üéØ –°—Ç–≤–æ—Ä—é–π—Ç–µ —Å—Ç—ñ–ª—å–∫–∏ —É—Ä–æ–∫—ñ–≤, —Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ"
- "‚è∞ –ó–∞–æ—â–∞–¥—å—Ç–µ 6 –≥–æ–¥–∏–Ω —â–æ—Ç–∏–∂–Ω—è"

**Pro –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º:**
- "üéâ –î—è–∫—É—î–º–æ –∑–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É TeachSpark!"
- "üí™ –£ –≤–∞—Å –Ω–µ–æ–±–º–µ–∂–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ–π"
- "üìà –°—Ç–≤–æ—Ä–µ–Ω–æ –≤–∂–µ X —É—Ä–æ–∫—ñ–≤ - –ø—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ!"

---

## üß™ Testing Scenarios

### Test 1: Free User Journey
```sql
-- Setup: Free user with 2 generations
UPDATE user_profiles 
SET 
  subscription_type = 'free',
  generation_count = 2
WHERE email = 'test@example.com';
```
**Expected:**
- ‚úÖ Shows "2 / 3" usage
- ‚úÖ Progress bar at 66%
- ‚úÖ "Upgrade" button visible
- ‚úÖ Pro features listed

### Test 2: Pro User
```sql
-- Setup: Pro user with active subscription
UPDATE user_profiles 
SET 
  subscription_type = 'pro',
  subscription_expires_at = NOW() + INTERVAL '25 days',
  generation_count = 15
WHERE email = 'test@example.com';
```
**Expected:**
- ‚úÖ Shows "TeachSpark Pro üéâ"
- ‚úÖ Shows "25 –¥–Ω—ñ–≤" remaining
- ‚úÖ Shows "15" generations (no limit)
- ‚úÖ Success badge visible

### Test 3: Expired Pro
```sql
-- Setup: Expired Pro subscription
UPDATE user_profiles 
SET 
  subscription_type = 'pro',
  subscription_expires_at = NOW() - INTERVAL '1 day'
WHERE email = 'test@example.com';
```
**Expected:**
- ‚ö†Ô∏è Should revert to Free status
- ‚ö†Ô∏è Should show upgrade prompt

---

## üìà Analytics Events

Track these on Account page:

```typescript
// View subscription tab
posthog.capture('view_subscription_tab');

// Click upgrade button
posthog.capture('click_upgrade_button', {
  source: 'account_page',
  current_count: 3
});

// View payment history
posthog.capture('view_payment_history');
```

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

**–ù–æ–≤–∏–π tab "–ü—ñ–¥–ø–∏—Å–∫–∞" –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π:**
- ‚úÖ –ü–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç—É—Å –ø—ñ–¥–ø–∏—Å–∫–∏
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π
- ‚úÖ –ü—Ä–æ–ø–æ–Ω—É—î upgrade –¥–ª—è Free
- ‚úÖ –ü–æ–∫–∞–∑—É—î —ñ—Å—Ç–æ—Ä—ñ—é –ø–ª–∞—Ç–µ–∂—ñ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω
- ‚úÖ Beautiful UI

**–î–æ—Å—Ç—É–ø:** `/account` ‚Üí Tab "–ü—ñ–¥–ø–∏—Å–∫–∞"

