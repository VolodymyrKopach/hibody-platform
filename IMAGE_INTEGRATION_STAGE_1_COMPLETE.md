# üé® –ï—Ç–∞–ø 1: –î–æ–¥–∞–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó - –ó–ê–í–ï–†–®–ï–ù–û

## üìã –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è Claude –ø—Ä–æ–º–ø—Ç—É
‚úÖ **–§–∞–π–ª:** `src/services/content/ClaudeSonnetContentService.ts`
- –î–æ–¥–∞–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è Claude –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
- –§–æ—Ä–º–∞—Ç –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤: `<!-- IMAGE_PROMPT: "–æ–ø–∏—Å" WIDTH: 512 HEIGHT: 384 -->`
- –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è FLUX API (—Ä–æ–∑–º—ñ—Ä–∏ –∫—Ä–∞—Ç–Ω—ñ 16, –∞–Ω–≥–ª—ñ–π—Å—å–∫—ñ –ø—Ä–æ–º–ø—Ç–∏)

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å
‚úÖ **–§–∞–π–ª:** `src/utils/slideImageProcessor.ts`
- `extractImagePrompts()` - –ø–∞—Ä—Å–∏–Ω–≥ HTML –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
- `validateAndFixDimensions()` - –∫–æ—Ä–µ–∫—Ü—ñ—è —Ä–æ–∑–º—ñ—Ä—ñ–≤ –¥–ª—è FLUX
- `generateAllImages()` - –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ FLUX
- `replaceImageComments()` - –∑–∞–º—ñ–Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –Ω–∞ img —Ç–µ–≥–∏
- `processSlideWithImages()` - –æ—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –æ–±—Ä–æ–±–∫–∏

### 3. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —Å–ª–∞–π–¥—ñ–≤
‚úÖ **–ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:**
- `ClaudeSonnetContentService.generateSlideContent()` —Ç–µ–ø–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—Ä–æ–±–ª—è—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –ü—Ä–æ—Ü–µ—Å: Claude –≥–µ–Ω–µ—Ä—É—î HTML ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å ‚Üí –∑–∞–º—ñ–Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤

### 4. –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤
‚úÖ **–§–∞–π–ª:** `src/types/lesson.ts`
- –î–æ–¥–∞–Ω–æ `SlideImageInfo` —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –†–æ–∑—à–∏—Ä–µ–Ω–æ `LessonSlide` –ø–æ–ª—è–º–∏ `images` —Ç–∞ `imageProcessingErrors`
- –î–æ–¥–∞–Ω–æ –º–µ—Ç–∞–¥–∞–Ω—ñ –ø—Ä–æ –æ–±—Ä–æ–±–∫—É –∑–æ–±—Ä–∞–∂–µ–Ω—å

### 5. –¢–µ—Å—Ç–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚úÖ **–§–∞–π–ª:** `public/test-image-generation-integration.html`
- –¢–µ—Å—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥—É –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
- –¢–µ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ FLUX
- –¢–µ—Å—Ç–∏ –ø–æ–≤–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

## üîß –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

### –ü—Ä–æ—Ü–µ—Å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Å–ª–∞–π–¥—É –∑ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏:

1. **Claude –≥–µ–Ω–µ—Ä—É—î HTML** –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏:
   ```html
   <!-- IMAGE_PROMPT: "A colorful cartoon cat teaching math" WIDTH: 512 HEIGHT: 384 -->
   <h1>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∑ –∫–æ—Ç–æ–º</h1>
   ```

2. **–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤** —Ä–µ–≥–µ–∫—Å–æ–º:
   ```javascript
   /<!--\s*IMAGE_PROMPT:\s*"([^"]+)"\s+WIDTH:\s*(\d+)\s+HEIGHT:\s*(\d+)\s*-->/gi
   ```

3. **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å** —á–µ—Ä–µ–∑ FLUX API:
   - –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ä–æ–∑–º—ñ—Ä—ñ–≤ (–∫—Ä–∞—Ç–Ω—ñ 16)
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—Å—ñ—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å –æ–¥–Ω–æ—á–∞—Å–Ω–æ
   - –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ fallback

4. **–ó–∞–º—ñ–Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –Ω–∞ img —Ç–µ–≥–∏**:
   ```html
   <img src="data:image/webp;base64,..." width="512" height="384" />
   ```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –î–æ—Å—Ç—É–ø –¥–æ —Ç–µ—Å—Ç–æ–≤–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏:
```
http://localhost:3009/test-image-generation-integration.html
```

### –¢–µ—Å—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—å:
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ IMAGE_PROMPT –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ–¥–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ FLUX
- ‚úÖ –ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (Claude + FLUX)

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –ü–µ—Ä–µ–≤–∞–≥–∏:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ—Å—Ç—å**: –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –±–µ–∑ –¥–æ–¥atkowych –¥—ñ–π
- **–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å**: –í—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å**: Fallback –¥–ª—è –Ω–µ–≤–¥–∞–ª–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π
- **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**: Base64 –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è (–Ω–µ–º–∞—î –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π)

### –¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- **–§–æ—Ä–º–∞—Ç–∏**: WebP —á–µ—Ä–µ–∑ FLUX.1-schnell
- **–†–æ–∑–º—ñ—Ä–∏**: 256x256 –¥–æ 1536x1536 (–∫—Ä–∞—Ç–Ω—ñ 16)
- **–®–≤–∏–¥–∫—ñ—Å—Ç—å**: 2-4 —Å–µ–∫—É–Ω–¥–∏ –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- **–Ø–∫—ñ—Å—Ç—å**: –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –æ—Å–≤—ñ—Ç–Ω—å–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É

## üîú –ù–∞—Å—Ç—É–ø–Ω—ñ –µ—Ç–∞–ø–∏

### –ï—Ç–∞–ø 2: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ç–∞ cache
- –ö–µ—à—É–≤–∞–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
- –°—Ç–∏—Å–Ω–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –¥–ª—è –∫—Ä–∞—â–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- –°–∏—Å—Ç–µ–º–∞ fallback –∑–æ–±—Ä–∞–∂–µ–Ω—å

### –ï—Ç–∞–ø 3: UI –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
- –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å
- –ü—Ä–µ–≤—å—é –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –æ–∫—Ä–µ–º–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å

### –ï—Ç–∞–ø 4: –†–æ–∑—à–∏—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö —Å—Ç–∏–ª—ñ–≤ –∑–æ–±—Ä–∞–∂–µ–Ω—å
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Å–∏—Å—Ç–µ–º–æ—é —Ç–µ–º
- Batch –æ–±—Ä–æ–±–∫–∞ –¥–ª—è –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö —Å–ª–∞–π–¥—ñ–≤

## üöÄ –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤ —Å–ª–∞–π–¥–∏ –ø—Ä–∞—Ü—é—î —Ç–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è. Claude —Ç–µ–ø–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î IMAGE_PROMPT –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ, —è–∫—ñ –∑–∞–º—ñ–Ω—é—é—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω–∏–º–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏ —á–µ—Ä–µ–∑ FLUX API.

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: "–°—Ç–≤–æ—Ä–∏ —Å–ª–∞–π–¥ –ø—Ä–æ –¥–∏–Ω–æ–∑–∞–≤—Ä—ñ–≤ –¥–ª—è –¥—ñ—Ç–µ–π 5-6 —Ä–æ–∫—ñ–≤"
‚Üì
Claude –≥–µ–Ω–µ—Ä—É—î HTML –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏
‚Üì  
–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ FLUX
‚Üì
–ì–æ—Ç–æ–≤–∏–π —Å–ª–∞–π–¥ –∑ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–º–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏
``` 